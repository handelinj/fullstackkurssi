(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports=n(39)},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(11),u=n.n(r),i=n(2),c=n(12),o=n(3),l=n.n(o),m="api/persons",f=function(){return l.a.get(m).then(function(e){return e.data})},p=function(e){return l.a.post(m,e).then(function(e){return e.data})},d=function(e,t){return l.a.put("".concat(m,"/").concat(e),t).then(function(e){return e.data})},g=function(e){return l.a.delete("".concat(m,"/").concat(e)).then(function(e){return e.data})},b=function(e){return s.a.createElement("form",null,s.a.createElement("div",null,"nimi: ",s.a.createElement("input",{value:e.newName,onChange:function(t){e.setNewName(t.target.value)}})),s.a.createElement("div",null,"puh: ",s.a.createElement("input",{value:e.newNumber,onChange:function(t){e.setNewNumber(t.target.value)}})),s.a.createElement("div",null,s.a.createElement("button",{type:"submit",onClick:function(t){if(t.preventDefault(),""!==e.newName&&""!==e.newNumber)if(-1===e.persons.map(function(e){return e.name}).indexOf(e.newName)){var n={name:e.newName,number:e.newNumber};p(n).then(function(t){e.setPersons(e.persons.concat(t)),e.setMessage("Lis\xe4ttiin ".concat(t.name)),e.setMessageType("success"),setTimeout(function(){e.setMessage(null),e.setMessageType("hidden")},5e3),e.setNewName(""),e.setNewNumber("")})}else if(window.confirm("".concat(e.newName," on jo luettelossa, vaihdetaanko numeroa?"))){var a=e.persons.find(function(t){return t.name===e.newName}),s=Object(c.a)({},a,{number:e.newNumber});d(a.id,s).then(function(t){e.setPersons(e.persons.map(function(e){return e.id!==a.id?e:t})),e.setMessage("Numero vaihdettiin onnistuneesti!"),e.setMessageType("success"),setTimeout(function(){e.setMessage(null),e.setMessageType("hidden")},5e3),e.setNewName(""),e.setNewNumber("")})}}},"lis\xe4\xe4")))},N=function(e){return s.a.createElement("div",null,s.a.createElement("form",null,s.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4: ",s.a.createElement("input",{value:e.filterString,onChange:function(t){e.setFilterString(t.target.value)}}))))},w=function(e){var t=""!==e.filterString?e.persons.filter(function(t){return t.name.includes(e.filterString)}):e.persons;return t.map(function(t){return s.a.createElement("div",{key:t.name},t.name," ",t.number," ",s.a.createElement("button",{onClick:function(){return function(t){window.confirm("Poistetaanko ".concat(t.name))&&g(t.id).then(function(n){e.setPersons(e.persons.filter(function(e){return e.id!==t.id})),e.setMessage("Poistettiin ".concat(t.name)),e.setMessageType("success"),setTimeout(function(){e.setMessage(null),e.setMessageType("hidden")},5e3)}).catch(function(n){console.log(n),e.setMessage("".concat(t.name," oli jo poistettu")),e.setMessageType("error"),setTimeout(function(){e.setMessage(null),e.setMessageType("hidden")},5e3),e.setPersons(e.persons.filter(function(e){return e.name!==t.name}))})}(t)}},"poista"))})},h=function(e){return s.a.createElement("div",{className:e.type},e.message)},E=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],u=Object(a.useState)(""),c=Object(i.a)(u,2),o=c[0],l=c[1],m=Object(a.useState)(""),p=Object(i.a)(m,2),d=p[0],g=p[1],E=Object(a.useState)(""),v=Object(i.a)(E,2),M=v[0],j=v[1],y=Object(a.useState)(""),O=Object(i.a)(y,2),T=O[0],S=O[1],P=Object(a.useState)("hidden"),k=Object(i.a)(P,2),C=k[0],x=k[1];return Object(a.useEffect)(function(){f().then(function(e){r(e)})},[]),s.a.createElement("div",null,s.a.createElement("h2",null,"Puhelinluettelo"),s.a.createElement(h,{message:T,type:C}),s.a.createElement(N,{filterString:M,setFilterString:j}),s.a.createElement("h3",null,"lis\xe4\xe4 uusi"),s.a.createElement(b,{persons:n,setPersons:r,newName:o,setNewName:l,newNumber:d,setNewNumber:g,setMessage:S,setMessageType:x}),s.a.createElement("h2",null,"Numerot"),s.a.createElement(w,{persons:n,setPersons:r,filterString:M,setMessage:S,setMessageType:x}))};n(38);u.a.render(s.a.createElement(E,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.17ee9bcf.chunk.js.map