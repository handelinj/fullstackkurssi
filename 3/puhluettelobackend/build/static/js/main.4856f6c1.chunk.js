(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports=n(39)},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n.n(s),r=n(11),u=n.n(r),i=n(2),o=n(12),c=n(3),l=n.n(c),m="api/persons",f=function(){return l.a.get(m).then(function(e){return e.data})},p=function(e){return l.a.post(m,e).then(function(e){return e.data})},d=function(e,t){return l.a.put("".concat(m,"/").concat(e),t).then(function(e){return e.data})},g=function(e){return l.a.delete("".concat(m,"/").concat(e)).then(function(e){return e.data})},N=function(e){return a.a.createElement("form",null,a.a.createElement("div",null,"nimi: ",a.a.createElement("input",{value:e.newName,onChange:function(t){e.setNewName(t.target.value)}})),a.a.createElement("div",null,"puh: ",a.a.createElement("input",{value:e.newNumber,onChange:function(t){e.setNewNumber(t.target.value)}})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit",onClick:function(t){if(t.preventDefault(),""!==e.newName&&""!==e.newNumber)if(-1===e.persons.map(function(e){return e.name}).indexOf(e.newName)){var n={name:e.newName,number:e.newNumber};p(n).then(function(t){e.setPersons(e.persons.concat(t)),e.setMessage("Lis\xe4ttiin ".concat(t.name)),e.setMessageType("success"),setTimeout(function(){e.setMessage(null),e.setMessageType("hidden")},5e3),e.setNewName(""),e.setNewNumber("")}).catch(function(t){e.setMessage("Nimen minimipituus on 3 merkki\xe4 ja numeron minimipituus on 8 merkki\xe4"),e.setMessageType("error"),setTimeout(function(){e.setMessage(null),e.setMessageType("hidden")},5e3),console.log(t.response)})}else if(window.confirm("".concat(e.newName," on jo luettelossa, vaihdetaanko numeroa?"))){var s=e.persons.find(function(t){return t.name===e.newName}),a=Object(o.a)({},s,{number:e.newNumber});d(s.id,a).then(function(t){e.setPersons(e.persons.map(function(e){return e.id!==s.id?e:t})),e.setMessage("Numero vaihdettiin onnistuneesti!"),e.setMessageType("success"),setTimeout(function(){e.setMessage(null),e.setMessageType("hidden")},5e3),e.setNewName(""),e.setNewNumber("")})}}},"lis\xe4\xe4")))},b=function(e){return a.a.createElement("div",null,a.a.createElement("form",null,a.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4: ",a.a.createElement("input",{value:e.filterString,onChange:function(t){e.setFilterString(t.target.value)}}))))},w=function(e){var t=""!==e.filterString?e.persons.filter(function(t){return t.name.includes(e.filterString)}):e.persons;return t.map(function(t){return a.a.createElement("div",{key:t.name},t.name," ",t.number," ",a.a.createElement("button",{onClick:function(){return function(t){window.confirm("Poistetaanko ".concat(t.name))&&g(t.id).then(function(n){e.setPersons(e.persons.filter(function(e){return e.id!==t.id})),e.setMessage("Poistettiin ".concat(t.name)),e.setMessageType("success"),setTimeout(function(){e.setMessage(null),e.setMessageType("hidden")},5e3)}).catch(function(n){console.log(n),e.setMessage("".concat(t.name," oli jo poistettu")),e.setMessageType("error"),setTimeout(function(){e.setMessage(null),e.setMessageType("hidden")},5e3),e.setPersons(e.persons.filter(function(e){return e.name!==t.name}))})}(t)}},"poista"))})},h=function(e){return a.a.createElement("div",{className:e.type},e.message)},E=function(){var e=Object(s.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],u=Object(s.useState)(""),o=Object(i.a)(u,2),c=o[0],l=o[1],m=Object(s.useState)(""),p=Object(i.a)(m,2),d=p[0],g=p[1],E=Object(s.useState)(""),M=Object(i.a)(E,2),v=M[0],j=M[1],y=Object(s.useState)(""),T=Object(i.a)(y,2),O=T[0],S=T[1],k=Object(s.useState)("hidden"),P=Object(i.a)(k,2),C=P[0],x=P[1];return Object(s.useEffect)(function(){f().then(function(e){r(e)})},[]),a.a.createElement("div",null,a.a.createElement("h2",null,"Puhelinluettelo"),a.a.createElement(h,{message:O,type:C}),a.a.createElement(b,{filterString:v,setFilterString:j}),a.a.createElement("h3",null,"lis\xe4\xe4 uusi"),a.a.createElement(N,{persons:n,setPersons:r,newName:c,setNewName:l,newNumber:d,setNewNumber:g,setMessage:S,setMessageType:x}),a.a.createElement("h2",null,"Numerot"),a.a.createElement(w,{persons:n,setPersons:r,filterString:v,setMessage:S,setMessageType:x}))};n(38);u.a.render(a.a.createElement(E,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.4856f6c1.chunk.js.map